<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TinyGL-C++: Getting Started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TinyGL-C++
   </div>
   <div id="projectbrief">Single-header, cross-platform, OpenGL 4.0 2D drawing framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('start.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Setting up scenes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#start">Setting up scenes</a></li>
<li class="level1"><a href="#camera">Using the default camera</a></li>
<li class="level1"><a href="#events">Responding to events</a></li>
<li class="level1"><a href="#shapes">Drawing shapes</a></li>
<li class="level1"><a href="#shaders">Using shaders</a><ul><li class="level2"><a href="#builtinshaders">The built-in shaders</a></li>
<li class="level2"><a href="#customshaders">Custom shaders</a></li>
</ul>
</li>
<li class="level1"><a href="#textures">Textures</a></li>
<li class="level1"><a href="#troubleshooting">Common problems</a><ul><li class="level2"><a href="#blackscreen">I have a black screen. What&#39;s wrong?</a></li>
</ul>
</li>
<li class="level1"><a href="#issues">Known issues</a></li>
</ul>
</div>
<div class="textblock"><p>The main classes implemented in this library are</p>
<ul>
<li>agl::Window: Manages user input, window properties, and the main application loop</li>
<li>agl::Renderer: Manages drawing and shaders.</li>
<li>agl::Image: Helper class for textures.</li>
<li>agl::Mesh: Implements primitives composed of large numbers of vertices, such as spheres and models.</li>
</ul>
<h1><a class="anchor" id="start"></a>
Setting up scenes</h1>
<p>The camera and projection determine the size of the scene that will be drawn (called the view volume). In other words, only objects that are in front of the camera and inside the projection's bounds will be rendered. Let's start with a simple example which uses the default camera and projection.</p>
<pre class="fragment"></pre><p>By default, the camera is located at position (0, 0, 2) and looks forward along the negative Z direction at position (0, 0, 0). The view volume is a box that extends from -1 to 1 in the X and Y directions, and -10 and 10 in the z direction. The default projection is an orthographic projection, meaning that all objects appear the same depth and there is no forshortening that makes further objects look smaller. The sphere has a default diameter of 1 and is centered at (0, 0, 0), so it appears in view.</p>
<dl class="section note"><dt>Note</dt><dd>The coordinate system is a right-handed coordinate system where +Y points up and +Z points out of the screen.</dd></dl>
<p>You have two choices for the projection.</p>
<ul>
<li>agl::Window::setupOrthoScene (box-shaped view volume)</li>
<li>agl::Window::setupPerspectiveScene (pyramidal view volume)</li>
</ul>
<p>The easiest way to change the scene size is to use the above functions. These functions will set both the camera position, look at point, and projection to fit the given parameters. Alternatively, you can set the camera and projection properties yourself using</p>
<ul>
<li>agl::Window::lookAt</li>
<li>agl::Window::ortho</li>
<li>agl::Window::perspective</li>
</ul>
<h1><a class="anchor" id="camera"></a>
Using the default camera</h1>
<p>By default, agl::Window defines a default camera, agl::Camera. This camera has orbit and pan controls mapped to mouse input. The disable camera movement, call agl::Window::setCameraEnabled.</p>
<h1><a class="anchor" id="events"></a>
Responding to events</h1>
<p>Override the mouse and keyboard methods in agl::Window to respond to user input. For example, the following example modifies a texture on agl::Window::keyUp</p>
<pre class="fragment"></pre><h1><a class="anchor" id="shapes"></a>
Drawing shapes</h1>
<p>Use the primitive calls in agl::Renderer to draw shapes. By default, they will have unit size (e.g. fit into a 1x1x1 box) and be centered at te origin.</p>
<p>Use the transform functions the modify the positions of these shapes.</p>
<ul>
<li>agl::Renderer::scale()</li>
<li>agl::Renderer::translate()</li>
<li>agl::Renderer::rotate()</li>
<li>agl::Renderer::identity()</li>
</ul>
<p>Below is an example.</p>
<pre class="fragment"></pre><p>You can also define your own meshs by extending the base classes</p>
<ul>
<li>agl::TriangleMesh (indexed mesh of triangles)</li>
<li>agl::LineMesh (mesh of lines)</li>
<li>agl::PointsMesh (mesh of points)</li>
</ul>
<p>For example,</p>
<pre class="fragment"></pre><p>You can also access the built-in primitives to customize their properties. The following example creates a custom torus.</p>
<pre class="fragment"></pre><p>By default, mesh vertex properties are static (e.g. they don't change values after the mesh os created). You can also define dynamic meshes by calling agl::Mesh::setIsDynamic(). For example,</p>
<pre class="fragment"></pre><h1><a class="anchor" id="shaders"></a>
Using shaders</h1>
<p>The active shader determines how shapes are drawn. By default, the active shader is "phong" (defined in phong.vs) and will color objects with a shiny white, "plastic" material. You can change the properties of the phong shader (such as colors, light direction, textures, and fog) by changing the values of the uniform variables defined in the shader. Some useful properties for phong are</p>
<p>Light.position Light.color Material.diffuse Material.ambient Material.specular Material.shininess Fog.enabled Fog.color Fog.minDist Fog.maxDist MainTexture.texture</p>
<p>Shader properties can be changed by called agl::Renderer::setUniform.</p>
<h2><a class="anchor" id="builtinshaders"></a>
The built-in shaders</h2>
<p>In addition to phong, agl also includes shaders for billboards (useful for sprites) and lines.</p>
<pre class="fragment"></pre><h2><a class="anchor" id="customshaders"></a>
Custom shaders</h2>
<p>You can also define your own shaders. Call agl::Renderer::loadShader to load it. When you load a shader, you also provide a string key that you use to active the shader when drawing using agl::Renderer::beginShader.</p>
<p>For compatibility with agl::Renderer your shader should support the following assumptions:</p>
<ul>
<li>Vertex positions are in layout location 0</li>
<li>Vertex normals (if present) are in layout location 1</li>
<li>Vertex texture coordinate (if present) are in layout location 2</li>
<li>Vertex tangents (if present) are in layout location 3</li>
</ul>
<p>Some properties may not be defined for all meshes. Your shader should also define the following uniform parameters in the vertex shader.</p>
<ul>
<li>uniform mat3 NormalMatrix;</li>
<li>uniform mat4 ModelViewMatrix;</li>
<li>uniform mat4 MVP;</li>
</ul>
<p>The above matrices will be set when primitives are drawn.</p>
<h1><a class="anchor" id="textures"></a>
Textures</h1>
<p>Textures can be loaded with agl::Renderer::loadTexture or using the agl::Image class. Textures are associated with a texture slot. If multiple textures should be passed to a shader, each should have its own unique slot. To pass a texture to a shader, use the method agl::Renderer::texture.</p>
<pre class="fragment"></pre><p>Cubemaps are special textures composed of 6 images intended to map to the sides of a cube. Cubemaps also need unique slots. Use agl::Renderer::loadCubemap and agl::renderer::cubemap to use cubemaps in your programs.</p>
<pre class="fragment"></pre><h1><a class="anchor" id="troubleshooting"></a>
Common problems</h1>
<h2><a class="anchor" id="blackscreen"></a>
I have a black screen. What's wrong?</h2>
<ul>
<li>Check your projection and camera properties. Make sure that any objects you define are located inside the view volume.</li>
<li>Try drawing a simple shape</li>
<li>Try drawing with the unlit shader</li>
<li>Make sure the the object color and background colors are different</li>
<li>If your colors have transparency, make sure that alpha is not 0.0</li>
</ul>
<h1><a class="anchor" id="issues"></a>
Known issues</h1>
<ul>
<li>Only RGBA images are currently supported </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
